{% extends "layout.html" %}
{% block content %}
 <form method="POST" action="">
            {{ form.hidden_tag() }}
            <fieldset class="form-group">
                <div class="form-group">
                    {{ form.amount.label(class="form-control-label") }}

                    {% if form.amount.errors %}
                        {{ form.amount(class="form-control form-control-lg is-invalid") }}
                        <div class="invalid-feedback">
                            {% for error in form.amount.errors %}
                                <span>{{ error }}</span>
                            {% endfor %}
                        </div>
                    {% else %}
                        {{ form.amount(class="form-control form-control-lg") }}
                    {% endif %}
                </div>
            </fieldset>
            <div class="form-group">
                {{ form.submit(class="btn btn-outline-info") }}
            </div>
        </form>

    {% if number %}
    <form action="#" method="post" id="demoForm" class="demoForm">
    <fieldset>
        <legend>See whats in the cinema now!!!!!!</legend>

        <p>
            <select name="demoSel[]" id="demoSel" size="4" multiple>
                      {% for movie in cinema %}
                        <option value="{{movie}}">{{movie}}</option>
                      {% endfor %}
            </select>
            <input type="submit" value="Submit" class="btn btn-outline-info"/>
            <textarea name="display" id="display" placeholder="view select list value(s) onchange" cols="20" rows="4" readonly></textarea>
        </p>

    </fieldset>
</form>

    <br><br><br><br>

    <form class="form-group" id="myForm" name="passdata" action="/group_recommendation" method="post"></form>
    <br>
    <button class="btn btn-outline-info" type="submit" form="myForm">Submit</button>

    <script>
      // arguments: reference to select list, callback function (optional)
    function getSelectedOptions(sel, fn) {
    var opts = [], opt;

    // loop through options in select list
    for (var i=0, len=sel.options.length; i<len; i++) {
        opt = sel.options[i];

        // check if selected
        if ( opt.selected ) {
            // add to array of option elements to return from this function
                console.log(opts.length);
                if(opts.length < {{number}}){
                opts.push(opt);

            // invoke optional callback function if provided
            if (fn) {
                fn(opt);
            }}
        }
    }

    // return array containing references to selected option elements
    return opts;
}

// example callback function (selected options passed one by one)
function callback(opt) {
    // display in textarea for this example
    var display = document.getElementById('display');
    display.innerHTML += opt.value + ', ';

}

// anonymous function onchange for select list with id demoSel
document.getElementById('demoSel').onchange = function(e) {
    // get reference to display textarea
    var display = document.getElementById('display');
    display.innerHTML = ''; // reset

    // callback fn handles selected options
    getSelectedOptions(this, callback);

    // remove ', ' at end of string
    var str = display.innerHTML.slice(0, -2);
    display.innerHTML = str;
};

document.getElementById('demoForm').onsubmit = function(e) {
    // reference to select list using this keyword and form elements collection
    // no callback function used this time
    var opts = getSelectedOptions( this.elements['demoSel[]'] );

    alert( 'The number of options selected is: ' + opts.length ); //  number of selected options

    return false; // don't return online form
};
    </script>

    <script>
        window.onload = function()
        {
            var counter = 0
            var form = document.getElementById("myForm");
            for(var i=0; i<{{number}}*{{number}}; i++)
            {
                var input = document.createElement('input');
                input.type = 'number';
                input.name = 'myInput_' + i;
                input.id = 'myInput_' + i;
                input.class = 'form-control'
                input.min = 1;
                input.max = 10;
                input.required = true
                if(counter<{{number}})
                {
                    form.appendChild(input);
                    counter++;
                 }
                 else
                 {
                     l_break = document.createElement("br");
                     linebreak = document.createElement("br");
                     form.appendChild(l_break);
                     form.appendChild(linebreak);
                     form.appendChild(input);
                     counter = 1
                 }
            }
        };
    </script>

    {% endif %}

<!--    <select id="cinema" onchange="myFunction()">-->
<!--      <option value="Option" selected>Option</option>-->
<!--      {% for movie in cinema %}-->
<!--        <option value="{{movie}}">{{movie}}</option>-->
<!--      {% endfor %}-->
<!--    </select>-->

{% endblock content %}